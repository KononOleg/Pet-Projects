(()=>{"use strict";var e={662:(e,t,n)=>{n.r(t)},585:(e,t,n)=>{n.r(t)},209:(e,t,n)=>{n.r(t)},988:(e,t,n)=>{n.r(t)},627:(e,t,n)=>{n.r(t)},330:(e,t,n)=>{n.r(t)},115:(e,t,n)=>{n.r(t)},612:(e,t,n)=>{n.r(t)},809:(e,t,n)=>{n.r(t)},34:(e,t,n)=>{n.r(t)},878:(e,t,n)=>{n.r(t)},236:(e,t,n)=>{n.r(t)},279:(e,t,n)=>{n.r(t)},932:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameSetting=void 0,n(662);const i=n(178),s=n(152);class r extends i.Basecomponent{constructor(){super("div",["GameSetting"]),this.selectCards=document.createElement("select"),this.element.appendChild(this.selectCards),this.selectCards.innerHTML='"\n    <select>\n        <option value="Animals" selected="selected">Animals</option>\n    </select>"\n    ',this.selectCards.addEventListener("change",(e=>{s.Setting.typeCards=this.selectCards.options[this.selectCards.selectedIndex].value})),this.selectDifficulty=document.createElement("select"),this.element.appendChild(this.selectDifficulty),this.selectDifficulty.innerHTML='"\n    <select>\n        <option value="2" selected="selected">2x2</option>\n        <option value="4">4x4</option>\n    </select>"\n    ',this.selectDifficulty.addEventListener("change",(e=>{s.Setting.Difficulty=Number(this.selectDifficulty.options[this.selectDifficulty.selectedIndex].value)}))}}t.GameSetting=r},549:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0,n(585);const s=n(178),r=n(152),o=n(680);class a extends s.Basecomponent{constructor(){super("div",["cards-field"]),this.cards=[],this.element.setAttribute("style",`grid-template-rows:repeat(${r.Setting.Difficulty/2},250px); grid-template-columns:repeat(${2*r.Setting.Difficulty},180px)`)}clear(){this.cards=[],this.element.innerHTML=""}addCards(e){return i(this,void 0,void 0,(function*(){this.cards=e,this.cards.forEach((e=>this.element.appendChild(e.element))),yield o.delay(1e3*r.Setting.show_time),this.cards.forEach((e=>e.flipToBack()))}))}}t.CardsField=a},537:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Statistics=void 0;class n{static setScore(){this.Score=100*(n.numberCompar-n.numberErrorCompar)-n.Time/10}static resetStatistics(){n.numberCompar=0,n.numberErrorCompar=0,n.Time=0}}t.Statistics=n,n.numberCompar=0,n.numberErrorCompar=0,n.Time=0},102:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinScreen=void 0,n(209);const i=n(178),s=n(454),r=n(203),o=n(529),a=n(537);class d extends i.Basecomponent{constructor(){super("div",["winScreen"]),this.winScreen_wrapper=new i.Basecomponent("div",["winScreen__wrapper"]),this.winScreen_text=new i.Basecomponent("p",["winScreen_text"]),this.bnt=new s.Button("ok"),document.body.appendChild(this.element),this.element.appendChild(this.winScreen_wrapper.element),this.winScreen_text.element.innerHTML=`Congratulations! You successfully found all matches on ${a.Statistics.Time} secondes.`,this.winScreen_wrapper.element.appendChild(this.winScreen_text.element),this.winScreen_wrapper.element.appendChild(this.bnt.element),this.bnt.element.addEventListener("mousedown",(()=>{this.element.remove(),o.Routing.getInstance().render(r.AboutGame)}))}}t.WinScreen=d},841:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,n(988);const i=n(178);class s extends i.Basecomponent{constructor(e){super("div",["card__container"]),this.image=e,this.isFliped=!1,this.element.innerHTML=`\n            <div class="card">\n                <div class="card__front" style="background-image: url('./images/${e}')"></div>\n                <div class="card__back"></div>\n            </div>\n        `}flipToBack(){return this.isFliped=!0,this.flip(!0)}flipToFront(){return this.isFliped=!1,this.flip(!1)}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("card_flip",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}}t.Card=s},618:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0,n(627);const s=n(178),r=n(549),o=n(841),a=n(680),d=n(426),l=n(537),c=n(152),u=n(102);class m extends s.Basecomponent{constructor(){super("div",["game"]),this.isAnimation=!1,this.timer=new d.Timer,this.cardsField=new r.CardsField,this.element.append(this.cardsField.element),this.element.prepend(this.timer.element),this.start()}start(){return i(this,void 0,void 0,(function*(){const e=yield fetch("images.json"),t=(yield e.json()).find((e=>e.category===c.Setting.typeCards));if(!t)throw Error("error");const n=this.RandomImages(t.images).map((e=>`${t.category}/${e}`));this.newGame(n)}))}newGame(e){this.cardsField.clear(),l.Statistics.resetStatistics();const t=e.concat(e).map((e=>new o.Card(e))).sort((()=>Math.random()-.5));t.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),d.Timer.countDownTimer(),this.cardsField.addCards(t)}cardHandler(e){return i(this,void 0,void 0,(function*(){if(!this.isAnimation&&e.isFliped){if(this.isAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);this.activeCard.image!=e.image?(yield a.delay(1e3),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack()]),l.Statistics.numberErrorCompar++):(l.Statistics.numberCompar++,l.Statistics.numberCompar===c.Setting.Difficulty&&(d.Timer.StopTimer(),l.Statistics.setScore(),this.winScreen=new u.WinScreen)),this.activeCard=void 0,this.isAnimation=!1}}))}RandomImages(e){let t=[],n=[],i=Math.pow(2,c.Setting.Difficulty-1);for(;t.length<i;){let s=Math.floor(Math.random()*i),r=!1;for(let e=0;e<t.length;e++)t[e]===s&&(r=!0);r||(t[t.length]=s,n.push(e[s]))}return n}}t.Game=m},152:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Setting=void 0;class n{}t.Setting=n,n.typeCards="Animal",n.Difficulty=2,n.show_time=5},426:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0,n(330);const i=n(178),s=n(152),r=n(537);class o extends i.Basecomponent{constructor(){super("div",["timer"]),this.element.appendChild(o.countdown.element)}static countDownTimer(){let e=s.Setting.show_time;this.udpateTimer(e);let t=setInterval((()=>{e--,this.udpateTimer(e),0==e&&(this.countTimer(),clearInterval(t))}),1e3)}static StopTimer(){clearInterval(this.int)}static countTimer(){o.udpateTimer(0),o.int=setInterval((()=>{r.Statistics.Time++,o.udpateTimer(r.Statistics.Time)}),1e3)}static udpateTimer(e){let t=Math.floor(e/60),n=e%60;o.countdown.element.innerHTML=`${t}:${n<10?"0"+n:n}`}}t.Timer=o,o.countdown=new i.Basecomponent("p",["count"])},77:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=n(977);t.App=class{constructor(e){this.rootElement=e,this.header=new i.Header,this.rootElement.prepend(this.header.element)}}},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0,n(115);const i=n(178),s=n(529),r=n(618),o=n(203),a=n(932),d=n(359),l=n(875),c=n(454),u=n(426);class m extends i.Basecomponent{constructor(){super("div",["header"]),this.aboutbnt=new l.NavButton("About Game"),this.settingbnt=new l.NavButton("Setting"),this.reg=new d.Registration,this.header_wrapper=new i.Basecomponent("div",["header__wrapper"]),this.header_logo=new i.Basecomponent("div",["header__logo"]),this.header_nav=new i.Basecomponent("div",["header__nav"]),this.element.appendChild(this.header_wrapper.element),this.header_wrapper.element.appendChild(this.header_logo.element),this.header_logo.element.innerHTML='\n                    <a class="logo__title">\n                      match\n                        <span class="logo__subtitle">match</span>\n                    </a>\n                    ',this.header_wrapper.element.appendChild(this.header_nav.element),this.header_wrapper.element.appendChild(m.header_reg.element),this.header_nav.element.append(this.aboutbnt.element),this.header_nav.element.append(this.settingbnt.element),m.header_reg.element.append(m.regButton.element),s.Routing.getInstance().render(o.AboutGame),this.aboutbnt.element.addEventListener("mousedown",(()=>{s.Routing.getInstance().render(o.AboutGame)})),this.settingbnt.element.addEventListener("mousedown",(()=>{s.Routing.getInstance().render(a.GameSetting)})),m.regButton.element.addEventListener("mousedown",(()=>{document.body.appendChild(this.reg.element)})),m.playbnt.element.addEventListener("mousedown",(()=>{s.Routing.getInstance().render(r.Game),m.playbnt.element.remove(),m.header_reg.element.append(m.stopbnt.element)})),m.stopbnt.element.addEventListener("mousedown",(()=>{s.Routing.getInstance().render(o.AboutGame),m.stopbnt.element.remove(),m.header_reg.element.append(m.playbnt.element),u.Timer.StopTimer()}))}static createPlayButton(){m.regButton.element.remove(),m.header_reg.element.append(m.playbnt.element)}}t.Header=m,m.regButton=new c.Button("Register new player"),m.playbnt=new c.Button("play"),m.stopbnt=new c.Button("stop"),m.header_reg=new i.Basecomponent("div",["header__reg"])},203:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AboutGame=void 0,n(612);const i=n(178);class s extends i.Basecomponent{constructor(){super("div",["aboutGame"]),this.element.innerHTML='\n        <p class="text">Soon...</p>\n        '}}t.AboutGame=s},583:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0,n(809);const i=n(178);class s extends i.Basecomponent{constructor(){super("div",["main"]),document.body.appendChild(this.element)}}t.Main=s},359:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Registration=void 0,n(34);const i=n(178),s=n(650),r=n(186),o=n(977);class a extends i.Basecomponent{constructor(){super("div",["registration"]),this.reg__wrapper=new i.Basecomponent("form",["reg__wrapper"]),this.input=new s.InputField("name"),this.submit=new r.inputSubmit("add user"),this.element.appendChild(this.reg__wrapper.element),this.reg__wrapper.element.appendChild(this.input.element),this.reg__wrapper.element.appendChild(this.submit.element),this.reg__wrapper.element.addEventListener("submit",(e=>{e.preventDefault(),this.element.remove(),o.Header.createPlayButton()}))}}t.Registration=a},529:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Routing=void 0;const i=n(932),s=n(618),r=n(203),o=n(583);class a{constructor(){this.main=new o.Main,this.items={default:r.AboutGame,aboutGame:r.AboutGame,game:s.Game,setting:i.GameSetting}}static getInstance(){return a.instance||(a.instance=new a),a.instance}render(e){this.main.element.innerHTML="";const t=new e;this.main.element.prepend(t.element)}}t.Routing=a},454:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0,n(878);const i=n(178);class s extends i.Basecomponent{constructor(e){super("button",["reg__button"]),this.text=e,this.element.innerHTML=`\n                ${e}\n            `}}t.Button=s},650:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputField=void 0;const i=n(178);class s extends i.Basecomponent{constructor(e){super("fieldset",["inputFieldset"]),this.text=e,this.legend=document.createElement("legend"),this.input=document.createElement("input"),this.element.appendChild(this.legend),this.legend.innerHTML=this.text,this.element.appendChild(this.input),this.input.setAttribute("type","text")}getValue(){return console.log("321"),this.input.value}}t.InputField=s},186:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inputSubmit=void 0,n(236);const i=n(178);class s extends i.Basecomponent{constructor(e){super("button",["inputSubmit"]),this.text=e,this.element.innerHTML=this.text,this.element.setAttribute("type","submit")}}t.inputSubmit=s},875:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavButton=void 0;const i=n(178);class s extends i.Basecomponent{constructor(e){super("button",["button","nav__button"]),this.text=e,this.element.innerHTML=`\n        <div class="button__img"></div>\n            ${e}\n        `}}t.NavButton=s},178:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Basecomponent=void 0,t.Basecomponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(279);const e=n(77);window.onload=()=>{const t=document.querySelector("body");if(!t)throw Error("error");new e.App(t)}})()})();
